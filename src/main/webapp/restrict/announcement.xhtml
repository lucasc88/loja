<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<ui:composition template="../_template.xhtml">

	<ui:define name="content">
		<h:form id="formAnnouncement" enctype="multipart/form-data">
			<p:tab id="announcement1" title="Dados do Anúncio">
				<p:panel header="O que você quer anunciar?">
					<h:panelGrid columns="2" columnClasses="value">
						<p:outputLabel for="titulo" value="Título:" />
						<p:inputText id="titulo" required="true"
							value="#{announcementBean.announcement.title}" />
						<br/>
						<p:message for="titulo"/>

						<p:outputLabel for="desc" value="Descrição:" />
						<p:inputTextarea id="desc" required="true" maxlength="255"
							value="#{announcementBean.announcement.description}" />
						<br/>
						<p:message for="desc"/>
						
						<p:outputLabel for="price" value="Preço:" />
						<p:inputNumber id="price" required="true"
							value="#{announcementBean.announcement.price}" />
						<br/>
						<p:message for="price"/>
						
						<p:outputLabel for="category" value="Categoria:" />
						<p:selectOneMenu id="category" required="true" converter="categoryConverter"
							value="#{announcementBean.announcement.category}"
							style="width:125px">
							<f:selectItem itemLabel="Selecione uma" itemValue="#{null}" />
							<f:selectItems value="#{announcementBean.categories}" var="c"
								itemLabel="#{c.name}" itemValue="#{c}"/>
						</p:selectOneMenu>
						<br/>
						<p:message for="category"/>
						
						<p:outputLabel value="Imagem Principal: " title="Será a imagem exibida na página inicial"/>
						<h:inputFile id="img" value="#{announcementBean.mainImage}" required="true"
							validator="#{announcementBean.validator}"/>
						<br/>
						<p:message for="img"/>
						
						<p:outputLabel value="Imagens Secundárias: " title="Serão as imagens exibidas no detalhamento da assinatura"/>
						<p:fileUpload fileUploadListener="#{announcementBean.handleFileUpload}" mode="advanced"
							dragDropSupport="false" multiple="true" sizeLimit="100000" sequential="true" auto="true"
							fileLimit="3" allowTypes="/(\.|\/)(jpe?g|png)$/" />
						<br/>
					</h:panelGrid>
				</p:panel>
			</p:tab>
			<p:commandButton value="Salvar" action="#{announcementBean.save}" ajax="false"/>
		</h:form>
	</ui:define>
</ui:composition>
</html>